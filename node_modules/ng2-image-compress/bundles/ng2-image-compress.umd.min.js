!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("rxjs"),require("@angular/core")):"function"==typeof define&&define.amd?define("ng2-image-compress",["exports","rxjs","@angular/core"],n):n(e["ng2-image-compress"]={},e.rxjs,e.ng.core)}(this,function(e,c,n){"use strict";var u=function t(){this.Resize_Max_Height=800,this.Resize_Max_Width=1e3,this.Resize_Quality=70,this.Resize_Type="image/jpg"},i=function s(){},m=function(){function t(){}return t.createImage=function(e,n){var o=new Image;o.onload=function(){n(o)},o.src=e},t.fileToDataURL=function(o){return new Promise(function(n){var e=new FileReader;e.onload=function(e){n(e.target.result)},e.readAsDataURL(o)})},t.filesToSourceImages=function(e){return c.Observable.create(function(o){var r=e.length;Array.from(e).forEach(function(e){var n=new i;console.log(e.name),n.fileName=e.name,n.type=e.type,n.imageObjectUrl=URL.createObjectURL(e),t.fileToDataURL(e).then(function(e){n.imageDataUrl=e,o.next(n),0==--r&&o.complete()})})})},t.filesArrayToSourceImages=function(e){return c.Observable.create(function(o){var r=e.length;e.forEach(function(e){var n=new i;console.log(e.name),n.imageObjectUrl=URL.createObjectURL(e),t.fileToDataURL(e).then(function(e){n.imageDataUrl=e,o.next(n),0==--r&&o.complete()})})})},t}(),o=function(){function a(){}return a.jicCompress=function(e,n){var o=n.Resize_Type,r=n.Resize_Quality||50,t="image/jpeg";o!==undefined&&"png"===o&&(t="image/png");var i=n.Resize_Max_Height||300,s=n.Resize_Max_Width||250;console.log("MAX Width n Height"),console.log(n.Resize_Max_Height),console.log(n.Resize_Max_Width),console.log("Quality"),console.log(r);var a=e.height,c=e.width;a<c?s<c&&(a=Math.round(a*=s/c),c=s):i<a&&(c=Math.round(c*=i/a),a=i),console.log("CVS Width n Height"),console.log(c),console.log(a),console.log("Quality"),console.log(r);var u=document.createElement("canvas");u.width=c,u.height=a;u.getContext("2d").drawImage(e,0,0,c,a);var m=u.toDataURL(t,r/100),g=new Image;return g.src=m,g.src},a.compressImage=function(o,r,t){var i=this;m.createImage(o.imageDataUrl,function(e){var n=i.jicCompress(e,r);o.compressedImage={fileName:o.fileName,imageObjectUrl:"",imageDataUrl:n,type:n.match(/:(.+\/.+);/)[1],compressedImage:null},t(o)})},a.filesToCompressedImageSourceEx=function(i,s){return new Promise(function(n,o){var r=i.length,e=m.filesToSourceImages(i),t=[];e.subscribe(function(e){t.push(e),null==s&&(s=new u),a.compressImage(e,s,function(e){0==--r&&n(c.from(t))})},function(e){o("Error while compressing images")})})},a.filesToCompressedImageSource=function(i){return new Promise(function(n,o){var r=i.length,e=m.filesToSourceImages(i),t=[];e.subscribe(function(e){t.push(e),a.compressImage(e,new u,function(e){0==--r&&n(c.from(t))})},function(e){o("Error while compressing images")})})},a.filesArrayToCompressedImageSourceEx=function(i,s){return new Promise(function(n,o){var r=i.length,e=m.filesArrayToSourceImages(i),t=[];e.subscribe(function(e){t.push(e),null==s&&(s=new u),a.compressImage(e,s,function(e){0==--r&&n(c.from(t))})},function(e){o("Error while compressing images")})})},a.filesArrayToCompressedImageSource=function(i){return new Promise(function(n,o){var r=i.length,e=m.filesArrayToSourceImages(i),t=[];e.subscribe(function(e){t.push(e),a.compressImage(e,new u,function(e){0==--r&&n(c.from(t))})},function(e){o("Error while compressing images")})})},a.IImageListToCompressedImageSource=function(t){return new Promise(function(o,e){var r=t.length;t.forEach(function(n){a.compressImage(n,new u,function(e){console.log(n),0==--r&&o(t)})})})},a.IImageListToCompressedImageSourceEx=function(t,i){return new Promise(function(o,e){var r=t.length;t.forEach(function(n){null==i&&(i=new u),a.compressImage(n,i,function(e){console.log(n),0==--r&&o(t)})})})},a.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],a.ngInjectableDef=n.defineInjectable({factory:function(){return new a},token:a,providedIn:"root"}),a}(),r=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[o,m]}},e.decorators=[{type:n.NgModule,args:[{imports:[],providers:[m,o]}]}],e}();e.ImageCompressService=o,e.ImageCompressModule=r,e.ResizeOptions=u,e.ImageUtilityService=m,e.SourceImage=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-image-compress.umd.min.js.map